extends layout
block content
    h1 GameNight
    section#gathering
        h2 Gathering
        div#gathering-add-user
            h2 Enter username to add to Gathering
            form(
                name="add-user"
                ng-submit="addUser(addUserInputUsername)"
            )
                input#add-user-input.form-control(
                    type="text"
                    name="add-user"
                    ng-model="addUserInputUsername"
                    required
                    ng-required
                    placeholder="enter username"
                )
                button#add-user-button(
                    type="button"
                    class="btn btn-sm btn-success"
                    ng-click="addUser(addUserInputUsername)"
                ) Add User
                    i(class="fa fa-user-plus")
        div#gathering-info(ng-cloak ng-show="ready")
            div#gathering-users
                h3 Users
                ol(ng-show="Gathering.users.length")
                    li(ng-repeat="user in Gathering.users")
                        ul.user(ng-class="{'bgg-user' : user.userData.id}")
                            li
                                span(class="username") {{user.username}}
                                    i(class="fa" ng-class="{'fa-user' : user.userData.id, 'fa-user-secret' : !user.userData.id}")
                                span.actions
                                    button.delete-user(
                                        ng-click="deleteUser(user)"
                                        class="btn btn-danger btn-xs"
                                    )
                                        i(class="fa fa-trash")
                            //li
                                span(class="title") First Name:
                                span(ng-show="user.userData.firstname.value") {{user.userData.firstname.value}}
                                span(ng-show="!user.userData.firstname.value") not set
                            //li
                                span(class="title") Last Name:
                                span(ng-show="user.userData.lastname.value") {{user.userData.lastname.value}}
                                span(ng-show="!user.userData.lastname.value") not set
                            //li
                                span(class="title") Id:
                                span(ng-show="user.userData.id") {{user.userData.id}}
                                span(ng-show="!user.userData.id") not set
                p(ng-show="Gathering.users.length == 0") No users in Gathering, add users above.
            //div#gathering-location
                h3 Location
                if typeof Gathering.location.name != "undefined"
                    span #{Gathering.location.name}
                else
                    span No Gathering location set.
            div#gathering-legend
                h3 Legend
                ul
                    li
                        i(class="fa fa-user")
                        span Users with a BGG account
                    li
                        i(class="fa fa-user-secret")
                        span Users without no BGG account
    section#games
        h2 Available Games
        ol(ng-show="Gathering.games.length" ng-cloak)
            //li(ng-repeat="game in Gathering.games" ng-bind-html="game.name.$t | html")
            li(ng-repeat="game in Gathering.games") {{game.name.value}}
        p(ng-show="Gathering.games.length == 0") No games available for Gathering, add more users above.
    section#filters